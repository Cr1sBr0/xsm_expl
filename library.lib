MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Write"
MOV R1, [R1]
EQ R1, R2
JNZ R1, 86                  
MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Read"
MOV R1, [R1]
EQ R1, R2
JNZ R1, 136              
MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Exit"
MOV R1, [R1]
EQ R1, R2
JNZ R1, 186                 
MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Heapset"
MOV R1, [R1]
EQ R1, R2
JNZ R1, 218                  
MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Alloc"
MOV R1, [R1]
EQ R1, R2
JNZ R1, 242                  
MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Free"
MOV R1, [R1]
EQ R1, R2
JNZ R1, 270                    
RET
MOV R1, SP       
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 7
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
RET
MOV R1, SP                    
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 7
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 6
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
RET
MOV R1,SP                    
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 10
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 10
RET
MOV R0,1024
MOV R1,1032
MOV R2,R0
MOV R3,2040
LT R2,R3
JZ R2,238
MOV [R0],R1
ADD R0,8
ADD R1,8
JMP 222
MOV [R0],-1
RET
MOV R0,1024
MOV R1,[R0]
MOV R2,-1                  
EQ R1,R2
JZ R1,256
MOV R3,-1
JMP 260
MOV R3,[R0]
MOV [R0],[R3]
MOV R4,SP
MOV R5,-1
ADD R4,R5
MOV [R4],R3
RET
MOV R0,SP                 
MOV R1,4
SUB R0,R1         
MOV R1,[R0]
MOV R0,1024
MOV [R1],[R0]
MOV [R0],R1
RET
